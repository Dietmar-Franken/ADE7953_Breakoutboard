//===============================================================================
//  Librarys
//===============================================================================
//ESP8266
  #include <ESP8266WiFi.h>
//Tools
  #include <Wire.h>             //I²C
  #include "ADE7953.h"
   
//===============================================================================
//  GLOBAL declarations
//===============================================================================
//===> HEADER <------------------------------------------------------------
  
//===> GPIO <--------------------------------------------------------------
//Tools

//I2C
  #define I2C_SDA 4
  #define I2C_SCL 5

//===> constants <---------------------------------------------------------

//===> variables <---------------------------------------------------------
  ADE7953 ADE;

//===============================================================================
//  SETUP
//===============================================================================
void setup() {

//Hardware Setup
  //RS232
  Serial.begin(115200);
  delay(10);
  Serial.println("");Serial.println("");
  Serial.println("StartSketch");Serial.println("");
  
  //I²C
  Wire.begin(I2C_SDA, I2C_SCL);  

  //ADE7953 
  ADE.init();
  ADE.write(0x107, 3);
  //ADE.pREG(PGA_IA);
  //ADE.pREG(PGA_IB);
  //ADE.pREG(PGA_V);
  //ADE.Test();

    
} 

//===============================================================================
//  Main Loop
//===============================================================================
 
void loop(){
  Serial.print("IA RMS: "); Serial.println(ADE.getIRMSA());
  Serial.print("IB RMS: "); Serial.println(ADE.getIRMSB());
  Serial.print("V  RMS: "); Serial.println(ADE.getVRMS());
  Serial.println("");
  
  delay(500);
}




